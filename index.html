<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TU Dublin Timetable App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #f4f4f4;
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
    }
    header {
      background: #004080;
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 1.3em;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.15);
      letter-spacing: 1px;
    }
    .controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 16px;
      background: #e4e8ef;
      padding: 8px 0;
      flex-wrap: wrap;
    }
    .controls label {
      font-weight: 500;
      color: #004080;
    }
    .controls select, .controls input[type="date"] {
      font-size: 1em;
      padding: 4px 8px;
      border-radius: 5px;
      border: 1px solid #bbb;
      outline: none;
    }
    .iframe-container {
      flex: 1;
      width: 100vw;
      height: 100%;
      overflow: hidden;
      background: #d2e2f3;
    }
    iframe {
      width: 100%;
      height: 100%;
      border: none;
      background: white;
    }
    @media (max-width: 600px) {
      header { font-size: 1em; padding: 10px; }
      .controls { font-size: 0.9em; }
    }
  </style>
</head>
<body>
  <header>
    ðŸ“… TU Dublin Timetable App
  </header>
  <div class="controls">
    <label for="programme">Programme:</label>
    <select id="programme">
      <option value="Tu877">TU877 (Computer Science)</option>
      <option value="Tu868">TU868 (Business)</option>
      <option value="Tu123">TU123 (Engineering)</option>
      <!-- Add more as needed -->
    </select>
    <label for="date">Week Starting:</label>
    <input type="date" id="date">
    <label for="view">View:</label>
    <select id="view">
      <option value="week">Week</option>
      <option value="day">Day</option>
    </select>
  </div>
  <div class="iframe-container">
    <iframe id="timetableFrame"></iframe>
  </div>
  <script>
    // Map your programme codes to their unique selection string (replace with correct values!)
    const programmeMap = {
      'Tu877': '241e4d36-93f2-4938-9e15-d4536fe3b2eb__654861e8-45c4-f352-e2e8-44dc8a9d3f5f',
      'Tu868': '241e4d36-93f2-4938-9e15-d4536fe3b2eb__1f1e3f3e-45c4-f352-e2e8-44dc8a9d3f5f', // example
      'Tu123': '241e4d36-93f2-4938-9e15-d4536fe3b2eb__abcd1234-45c4-f352-e2e8-44dc8a9d3f5f', // example
      // Add more as needed
    };

    // Set default date to today or the nearest Monday
    function getDefaultMonday() {
      // Get today's date
      const today = new Date();
      // Get day of week (0 = Sunday, 1 = Monday, etc.)
      const day = today.getDay();
      // Calculate the date of Monday this week
      const diff = today.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is Sunday
      const monday = new Date(today.setDate(diff));
      return monday.toISOString().split('T')[0]; // YYYY-MM-DD
    }
    document.getElementById('date').value = getDefaultMonday();

    function updateIframe() {
      const programme = document.getElementById('programme').value;
      const selection = programmeMap[programme] || programmeMap['Tu877'];
      const date = document.getElementById('date').value;
      const view = document.getElementById('view').value;
      if (!date) return; // Wait until date is picked
      const src = `https://timetables.tudublin.ie/timetables?date=${date}&view=${view}&timetableTypeSelected=241e4d36-93f2-4938-9e15-d4536fe3b2eb&searchText=${programme}&selections=${selection}`;
      document.getElementById('timetableFrame').src = src;
    }
    document.getElementById('programme').addEventListener('change', updateIframe);
    document.getElementById('date').addEventListener('change', updateIframe);
    document.getElementById('view').addEventListener('change', updateIframe);
    // Initial load
    updateIframe();
  </script>
</body>
</html>
      font-size: 1em;\
      padding: 15px 30px;\
      background-color: #ffffff;\
      color: #004080;\
      border: none;\
      border-radius: 8px;\
      cursor: pointer;\
      transition: background-color 0.2s;\
    \}\
    button:hover \{\
      background-color: #e0e0e0;\
    \}\
  </style>\
</head>\
<body>\
  <div>\
    <h1>\uc0\u55357 \u56517  TU Dublin Timetable</h1>\
    <button onclick="openTimetable()">Open Timetable</button>\
  </div>\
\
  <script>\
    function openTimetable() \{\
      window.open(\
        "https://timetables.tudublin.ie/timetables?date=2025-09-01&view=agenda",\
        "_blank"\
      );\
    \}\
  </script>\
</body>\
</html>\
\
}
